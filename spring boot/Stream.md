# stream 이해하기

스트림은 배열에 대해 **저장되어 있는 정보를 하나씩 참조하며 반복 처리**를 가능케 하는 기능이다.

# stream

스트림은 **데이터의 흐름**으로 여러 특징이 있는데

- 원본 데이터로부터 **데이터를 읽기만 하고 데이터 자체를 변경하지는 않는다**.
- **한 번 사용하면 닫혀서 재사용이 불가**하다.
- 작업을 **내부 반복으로 처리해서 간결**하다. (내부 반복은 반복문을 메소드 내부에 숨기는것)

또한 **스트림은 생성, 중간처리, 최종처리 3단계로 구분**된다.

### 생성

스트림은 **컬렉션, 배열 등 다양한 데이터 소스에서 생성**할 수 있다.

```
Stream<String> strStream1 = strList.stream();

```

이렇게 처리할 객체를 생성해서 중간처리를 한다.

### 중간처리

중간처리 연산 목록에는 여러가지가 있는데 일단 자주 쓸 것 같은것만 보자면

`.distinct()` 중복 제거

`.filter()` 조건에 맞게 필터링

`.map()` 해당 **스트림의 요소를 함수 인수로 전달**, 그 **반환 값으로 이루어진 새로운 스트림 반환**

### 최종처리

최종처리에서는 요소의 출력, 연산, 수집 등 여러 최종 결과 표시 방법이 있다. 자주 쓸 것 같은것만 보자면

`.forEach()` 해당 요소를 소모하여 명시된 동작 수행

`.collect()` 스트림의 **요소들을 다른 자료형으로 변환**

## 사용하는 이유

설명만 보면 복잡해보이고 어려워보이는데 왜 사용하는 건지 생각해보자면

- 스트림은 다른 반복문에 비해 **가독성이 향상**된다. 반복문 안에 수행 내용을 쭉 쓰는 게 아니라 처리 부분마다 하고 싶은 연산을 하면 되기에 **코드가 줄어들고 편리**해서 사용하는 것 같다.
- 또한 외부 반복을 사용하여 **병렬 처리**를 할 땐 스레드 간의 공유자원을 한순간에 한 스레드만 접근하게 해야하는데 **내부 반복은 이를 관리할 필요가 없어**서 사용하는 것 같다.

그리고`필터-맵` 기반의 API를 사용하여 **지연 연산을 하기 때문에 성능을 최적화** 하기 때문에 사용하는 것 같다.

## 마무리

가끔 다른 사람의 코드를 보다 보면 포문이 아닌 스트림을 활용해서 리스트를 처리하는 것을 봤다. 그때 살짝 검색해서 찾아보기도 했는데 이해가 잘 안됐었다. 하지만 이번에 여러 자료를 보고 사용하는 이유에 대해 생각해보고 찾아보니 이해가 된 것 같다. 앞으로는 포문보다 성능이 좋은 스트림으로 자료를 처리해야겠다.